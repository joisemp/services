<!-- Vehicle Model Form -->
<form hx-post="{% url 'transportation:vehicle_model_create_ajax' %}" 
      hx-target="#vehicle-model-form-container" 
      hx-swap="outerHTML">
    {% csrf_token %}
    
    <div class="modal-body">
        {% if form.errors %}
            <div class="alert alert-danger" role="alert">
                <h6 class="alert-heading">
                    <span class="material-symbols-outlined me-2">error</span>
                    Please correct the errors below:
                </h6>
                {% for field, errors in form.errors.items %}
                    {% for error in errors %}
                        <p class="mb-1">{{ error }}</p>
                    {% endfor %}
                {% endfor %}
            </div>
        {% endif %}
        
        <div class="row">
            <div class="col-md-6">
                <div class="mb-3">
                    <label for="{{ form.make.id_for_label }}" class="form-label">
                        Make <span class="text-danger">*</span>
                    </label>
                    <div class="d-flex gap-2">
                        {{ form.make }}
                        <button type="button" class="btn btn-outline-primary" 
                                hx-get="{% url 'transportation:vehicle_make_form_modal' %}"
                                hx-target="#vehicle-make-modal-container"
                                hx-swap="innerHTML"
                                hx-trigger="click"
                                title="Add New Vehicle Make">
                            <span class="material-symbols-outlined">add</span>
                        </button>
                    </div>
                    {% if form.make.errors %}
                        <div class="invalid-feedback d-block">
                            {% for error in form.make.errors %}
                                {{ error }}
                            {% endfor %}
                        </div>
                    {% endif %}
                </div>
            </div>
            
            <div class="col-md-6">
                <div class="mb-3">
                    <label for="{{ form.name.id_for_label }}" class="form-label">
                        Model Name <span class="text-danger">*</span>
                    </label>
                    {{ form.name }}
                    {% if form.name.errors %}
                        <div class="invalid-feedback d-block">
                            {% for error in form.name.errors %}
                                {{ error }}
                            {% endfor %}
                        </div>
                    {% endif %}
                </div>
            </div>
        </div>
        
        <div class="row">
            <div class="col-md-6">
                <div class="mb-3">
                    <label for="{{ form.vehicle_type.id_for_label }}" class="form-label">
                        Vehicle Type <span class="text-danger">*</span>
                    </label>
                    <div class="d-flex gap-2">
                        {{ form.vehicle_type }}
                        <button type="button" class="btn btn-outline-primary" 
                                hx-get="{% url 'transportation:vehicle_type_form_modal' %}"
                                hx-target="#vehicle-type-modal-container"
                                hx-swap="innerHTML"
                                hx-trigger="click"
                                title="Add New Vehicle Type">
                            <span class="material-symbols-outlined">add</span>
                        </button>
                    </div>
                    {% if form.vehicle_type.errors %}
                        <div class="invalid-feedback d-block">
                            {% for error in form.vehicle_type.errors %}
                                {{ error }}
                            {% endfor %}
                        </div>
                    {% endif %}
                </div>
            </div>
        </div>
        
        <div class="alert alert-info" role="alert">
            <span class="material-symbols-outlined me-2">info</span>
            <strong>Note:</strong> The new vehicle model will be automatically selected in the vehicle form after creation.
        </div>
    </div>
    
    <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
            <span class="material-symbols-outlined me-2">close</span>
            Cancel
        </button>
        <button type="submit" class="btn btn-primary">
            <span class="material-symbols-outlined me-2">save</span>
            Create Model
        </button>
    </div>
</form>
